<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>Legacy Projects in Ruby on Rails – Running Jack</title> <meta name="description" content="Never Too Late."> <meta name="keywords" content="Ruby on Rials, Audience1st, Notes"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="/assets/img/logo.png"> <meta name="twitter:title" content="Legacy Projects in Ruby on Rails"> <meta name="twitter:description" content="Notes made when configure Audience1st…"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Legacy Projects in Ruby on Rails"> <meta property="og:description" content="Notes made when configure Audience1st…"> <meta property="og:url" content="/Ruby-on-Rails-Get-Started-with-Legacy-Project/"> <meta property="og:site_name" content="Running Jack"> <meta property="og:image" content="/assets/img/logo.png"> <link rel="canonical" href="/Ruby-on-Rails-Get-Started-with-Legacy-Project/"> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Running Jack Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- JS --> <script src="/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link rel="shortcut icon" href="/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(/assets/img/bg.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="/assets/img/logo.png" alt="Running Jack photo" class="author-photo"> <h4>Running Jack</h4> <p>Never Too Late.</p> </li> <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:omyjackwan@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://facebook.com/Jack%20Wan" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://github.com/WanNJ" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="/posts/">All Posts</a></li> <li><a href="/tags/">All Tags</a></li> </ul> </li> <li><a href="/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Legacy Projects in Ruby on Rails</h1> <h4>13 Oct 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~3 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="/projects/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="audience1st">Audience1st</h1> <p>I am working on Ruby on Rails this semester, which is very suitable for Agile/XP. <a href="https://github.com/WanNJ/audience1st">Audience1st</a> is an open source project designated to offer ticketing system to local theaters, in which case they will be able to have their own customer resources in stead of just a list of names provided by the third party ticketing system. Our professor, <a href="http://www.armandofox.com/">Armando Fox</a>, is an excellent versatile EECS educator, who is also the creator of this repo for his love in play and music. He did this not for money but for his interests in this area, so he only charge the local theaters the money for maintaining the website.</p> <p>Although the look of the website is not perfect, sometimes you may think ugly, but this is for that we have no professional front programmer in hand. But we are considering to make some improvements later.</p> <h1 id="migration-of-the-project">Migration of the project</h1> <p>The first thing we need to do for developing this app is to migrate it to our own development environment.</p> <h3 id="config">Config</h3> <p>We can hardly imagine writing a useful app without using external APIs, which require tokens or passwords. <strong>Checking these passwords or secrets in to public repos is a very bad practice.</strong></p> <p>In <a href="https://12factor.net">12-Factor App</a> methodology, it emphasizes the importance to keep configurations in the environment to implement <strong>independency</strong>(<strong>strict separation of config from code</strong>). This is because “Config varies substantially across deploys, code does not.” It says:</p> <p class="notice"><em>A litmus test for whether an app has all config correctly factored out of the code is whether the codebase <strong>could be made open source at any moment</strong>, without compromising any credentials.</em></p> <p>Good practice is to ignore these config files in version control. In audience1st, <code class="highlighter-rouge">.gitignore</code> looks like:</p> <figure class="highlight"><pre><code class="language-.gitignore" data-lang=".gitignore">coverage/               # Test coverage log folder
config/database.yml     # Database configuration file
db/*.sqlite3	        # Local database file
config/application.yml  # Secrets storage
log/                    # Log folder for development environment
.*                      # All system files

# Others
.bundle/
TAGS
brakeman.*
rerun.txt
public/stylesheets/venue
tmp/</code></pre></figure> <p>In Ruby, we store the secrets in <code class="highlighter-rouge">config/application.yml</code> and we store database configurations in <code class="highlighter-rouge">config/database.yml</code>. As you can see, these two files are ignored by <code class="highlighter-rouge">.gitignore</code>. Others are explained in the comments section.</p> <p>One typical <code class="highlighter-rouge">config/application.yml</code> may look like this:</p> <figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">test</span><span class="pi">:</span>
<span class="s">session_secret</span><span class="pi">:</span> <span class="s2">"</span><span class="s">30</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="s">characters</span><span class="nv"> </span><span class="s">string"</span>
<span class="s">stripe_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">stripe</span><span class="nv"> </span><span class="s">public</span><span class="nv"> </span><span class="s">(publishable)</span><span class="nv"> </span><span class="s">key"</span>
<span class="s">stripe_secret</span><span class="pi">:</span> <span class="s2">"</span><span class="s">stripe</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">key"</span>
<span class="c1"># include at most one of the following two lines - not both:</span>
<span class="s">email_integration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">MailChimp"</span>  <span class="c1"># if you use MailChimp, include this line verbatim, else omit</span>
<span class="s">email_integration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ConstantContact"</span> <span class="c1"># if you use CC, include this line verbatime, else omit</span>
<span class="c1"># if you included one of the two Email Integration choices:</span>
<span class="s">mailchimp_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">optional:</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">Mailchimp,</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">key;</span><span class="nv"> </span><span class="s">otherwise</span><span class="nv"> </span><span class="s">omit</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">entry"</span>
<span class="s">constant_contact_username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Username</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">CC</span><span class="nv"> </span><span class="s">login,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">CC"</span>
<span class="s">constant_contact_password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">password</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">CC</span><span class="nv"> </span><span class="s">login,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">CC"</span>
<span class="s">constant_contact_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">CC</span><span class="nv"> </span><span class="s">publishable</span><span class="nv"> </span><span class="s">part</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">key"</span>
<span class="s">constant_contact_secret</span><span class="pi">:</span> <span class="s2">"</span><span class="s">CC</span><span class="nv"> </span><span class="s">secret</span><span class="nv"> </span><span class="s">part</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">key</span></code></pre></figure> <p>One typical <code class="highlighter-rouge">config/database.yml</code> may look like this:</p> <figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">test</span><span class="pi">:</span>
  <span class="s">adapter</span><span class="pi">:</span> <span class="s">sqlite3</span>
  <span class="s">database</span><span class="pi">:</span> <span class="s">db/test.sqlite3</span>

<span class="s">development</span><span class="pi">:</span>
  <span class="s">adapter</span><span class="pi">:</span> <span class="s">sqlite3</span>
  <span class="s">database</span><span class="pi">:</span> <span class="s">db/development.sqlite3</span></code></pre></figure> <h3 id="setup-database">Setup Database</h3> <p>Now we can directly run <code class="highlighter-rouge">rake db:setup</code>, which runs <code class="highlighter-rouge">db:migrate</code> followed by <code class="highlighter-rouge">db:seed</code> to create necessary seed data.</p> <h3 id="to-be-continued">To Be Continued…</h3> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="/tags/#Ruby%20on%20Rials" title="Pages tagged Ruby on Rials" class="tag"><span class="term">Ruby on Rials</span></a><a href="/tags/#Audience1st" title="Pages tagged Audience1st" class="tag"><span class="term">Audience1st</span></a><a href="/tags/#Notes" title="Pages tagged Notes" class="tag"><span class="term">Notes</span></a></span> <!-- <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=/Ruby-on-Rails-Get-Started-with-Legacy-Project/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=/Ruby-on-Rails-Get-Started-with-Legacy-Project/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=/Ruby-on-Rails-Get-Started-with-Legacy-Project/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> --> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="/assets/js/jquery-1.12.0.min.js"></script> <script src="/assets/js/jquery.dlmenu.min.js"></script> <script src="/assets/js/jquery.goup.min.js"></script> <script src="/assets/js/jquery.magnific-popup.min.js"></script> <script src="/assets/js/jquery.fitvid.min.js"></script> <script src="/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'jackwan'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
